\subsection{Purpose}
% here we include the goals of the project

\subsubsection{Description of the Proposed System}
The project "CLup - Customer Line up" is a line spot reservation system planned to be used by managers, clerks, and customers of many local vendors and chains.
The system proposes a handy solution for the ongoing issue of proper social distancing management, particularly in grocery shopping, by providing assistance to cope with the customer load for managers and helping customers access stores in a safe and controlled manner.

In particular, users will be able to see the stores, get a line number, and book in advance for the grocery stores they would like to visit.
Once assigned a line number, the customer will track the estimated time of arrival of the line and wait for the notification that informs about his or her line's forthcoming arrival; hence waiting time in the line in the crowd is minimum.
Also, "CLup" provides uniquely generated QR codes per the line number, which can be utilized by the store managers as a proper monitoring tool in the entrances and exits of the locations.
The product's general purpose is to keep the congestion levels in line with the stores at a minimum via providing useful features for all the users.


\subsubsection{Goals}

\begin{itemize}
    \item \textbf{$G_{1}$} Regulate the influx of people in the stores.
    \item \textbf{$G_{2}$} Avoid people lining up in front of the stores in order to reduce the spreading of COVID-19.
\end{itemize}

% Manager:
% Set the estimated customer number to be in the location (based on govt. regulations, space availability etc.)
% Set the opening and closing hours of the store per day.
% Set the in-shop location & categories of products in the location
% Set the limit of reservation per customer per month, per day, per week
% Set the location of the store
% Add other chain members or partner stores
% Observe the current amount of customers in the location.
% Stop the system from issuing more tickets for a given day in case of an overflow or emergency
% Schedule a system stop.
% Set the timeout

% Clerk:
% Monitor the entrance and exit of customers with line numbers, by scanning their QR codes.
% Print line numbers with QR code on them for the physically arriving customers who doesn't have a virtual ticket.

% Customer:
% Retrieve a direct line number for a location
% Generate a QR code for entry
% See an ETA, like 30 mins are left for your line number
% View the location of the store to plan their trip
% Book a future line number for a day
% See the occupancy of the location for different time and day.
% View the alternative slot suggestions for the visit planned
% View the alternative slots available in near chain or partner stores
% Set the categories, products of interest before visit for finer granularity.
% Set the estimated time for visit.
% See the amount of people currently in the store
% Set user details, name, surname
% View forecasted occupancy for time slots.

% System:
% Forecast the occupancy of store per time slot
% Timeouts the line numbers when not registered for given timeout by manager.

\subsection{Scope}
\subsection{Scope}

The system is expected to implement the following features, which are detailed in the future sections of this document: \\
\begin{itemize}
    \item \textbf{Generate Line Number}: The customers of the store can generate a line number for themselves as soon as possible to visit a store.
    \item \textbf{Schedule Line Number}: The customers can generate a line number for a future planned visit.
    Using the CLup app the customers can further define the product categories that they plan to visit to allow finer granularity and better time estimation for a visit.
    The system thus will allocate them a line number according to the time slot the customer has selected and it will send an email to the customer if the line number is canceled for a reason.
    From the system, the customers can view the store's location and plan their route accordingly.
    While scheduling their line numbers, the customers can see an occupancy forecast for the store during time slots so that they can further decide on visiting the store.
    If added by the manager, the customers can instead prefer to visit a partner store.
    \item \textbf{Print Line Number}: The clerks in the store can generate line number tickets for those customers who have not used the CLup app to generate a line number.
    \item \textbf{Manage Store}: The managers in the store can update the information regarding the store, which are the name and the location of the store.
    Furthermore, the managers can use this feature to activate or deactivate additional features provided by the system to manage customers more effectively.
    They can update the timeout interval for a ticket to expire, to manage the queue in front of the store.
    They can add product categories that their store provides, for the customers to select before booking their visit as mentioned before.
    They can assign more managers and clerks if necessary to use the system to its full extent.
    They can administer the time slots for their customers by setting the opening and closing hours, with possible breaks in between.
    They can administer the partner stores of their stores if they exist, for their customers to select instead.
    They can enable the reservation limit to prevent any customer from abusing the system by setting the limit for how many tickets a customer can generate per a given time interval of a month, a week, or a day.
    The stores are to be created by the Super User, while granting access to the first manager.
\end{itemize}

The system is expected to be delivered in two parts, a client application, and a server.
Given its functionality is depending on the current ongoing pandemic, the app is expected to be implemented before the COVID-19 crisis ends.
For this, the client application is expected to be implemented as an app running on a browser, increasing the range of devices being able to run the app, without increasing the development costs, which can then be ported to a mobile application if needed.
The server is expected to serve the client application to its users and handle any transaction incoming.
To implement the location-specific features of the system, due to the complexity of those, namely location finding, addressing, and route planning tasks, an external Maps API is used.

The system is going to provide the following functions:
\begin{itemize}
    \item \textbf{$F_{1}$} Customers can issue a line number for a store.
    \item \textbf{$F_{2}$} Customers can issue line numbers for their future visits.
    \item \textbf{$F_{3}$} Customers can detail their visits by category.
    \item \textbf{$F_{4}$} Customers can plan their visit to the store.
    \item \textbf{$F_{5}$} Customers may prefer to use alternative time slots or partner stores for their visit.
    \item \textbf{$F_{6}$} Managers can prevent customers from issuing line numbers.
    \item \textbf{$F_{7}$} Managers can customize the system to allow optimizations for increased granularity, flow control, and time slot forecasting.
    \item \textbf{$F_{8}$} Clerks and Managers can monitor the customers through their entrance and exits.
    \item \textbf{$F_{9}$} Customers can obtain printed line number tickets.
\end{itemize}

\subsubsection{Targeted Users}
"CLup" aims to resolve the problem of Customers queueing up in front of a store, without control of availability of place in the store and future contact tracing by managers.
\\[0.5cm]

\textbf{Customer:} \\
Customers will be able to obtain specific line numbers for various stores using CLup, which they can track the estimated time available with and also view the location on a map application to plan their visit.
Customers can further obtain line numbers for future visits, based on the system's info about the availability of free spots on the specific time intervals.
They may prefer to visit a different branch of the same chain.
Furthermore, they can provide specific product categories they intend to purchase or set an estimated time for their visit to allow finer granularity.
Some customers may also prefer to obtain a line number upon visiting the store physically.
To plan their visit in a time slot where the store will be less crowded, the users can see the store's occupancy based on already taken line numbers and forecasts provided by the system.
\\[0.5cm]
\textbf{Clerk:} \\
The clerk (which can be a shopping assistant or a security detail) can monitor customers' flow and manually intervene in case of missing line numbers via performing manual checkout for a specific customer or by printing line numbers physically for some customers.
\\[0.5cm]
\textbf{Manager:} \\
The store manager (which could be an actual manager or someone responsible for handling customer management) can provide details regarding the availability of products and the store in general, by setting the opening hours, maximum allowed customers in the shop, in-shop location of different product categories, the maximum amount of reservations that can be made per customer, line number timeout and the location.
Also, for chains and relevant stores, the manager can add chain members for the store.
\textbf{Super User:} \\
In order to use the CLup application, store or business owners should contact CLup Super User who will give them permission to use the application and create a Manager account for them.


\subsection{Definitions, Acronyms, Abbreviations}
\subsubsection{Definitions}
\begin{itemize}
    \item \textit{Store}: The physical location of the business that uses the line reservation system
    \item \textit{Manager}: A person in charge of executive action within the store
    \item \textit{Customer}: A person to visit the store
    \item \textit{Clerk}: A person in charge of handling the entrance and exit of customers. This user can be replaced by a QR code totem or a similar device for customers to directly interact with instead.
    \item \textit{Visit Time}: The time interval in which a customer performs a visit to the store
    \item \textit{Super User}: A user assigned by the company hosting the system to grant manager access to certain users.
    \item \textit{Line Number}: A number that indicates the ordering of a specific customer in the line % Rephrase
    \item \textit{Line Number Ticket}: A physical ticket printed that features the line number and the QR code.
    \item \textit{Time Slot}: Specific intervals of time in which a customer can schedule their visits determined by the opening hours.
    \item \textit{Partner Store}: A different store included in the same beneficiary chain of command (such as another member of the franchise or store chain) or a mutual agreement with the specific store
    \item \textit{Product}: Any item, items, service or services demanded by the customer, and provided by the store to the customer.
    \item \textit{In-store Location}: A location of a specific product category inside the store.
    \item \textit{Working hours}: The time intervals that the store is open during each day.
    \item \textit{Maps API}: A third-party mapping service implementation used for location tracking.
    \item \textit{SSO Provider}: A third-party service providing SSO authentication.
    \item \textit{ID Token}: A token provided by the SSO provider to verify the user's identity from the server.
\end{itemize}
\subsubsection{Acronyms}
\begin{itemize}
    \item \textbf{RASD}: Requirement Analysis and Specification Document
    \item \textbf{QR Code}: Quick Response Code
    \item \textbf{API}: Application Programming Interface
    \item \textbf{SMTP}: Simple Mail Transfer Protocol % TODO: Find the reference for this and link in references.
    \item \textbf{HTTP}: Hyper-Text Transfer Protocol
    \item \textbf{REST}: REpresentational State Transfer
    \item \textbf{JDBC}: Java DataBase Connectivity
    \item \textbf{DBMS}: DataBase Management System
    \item \textbf{JWT}: JSON Web Token
    \item \textbf{ACID}: Atomicity, Consistency, Isolation, Durability
    \item \textbf{ORM}: Object-Relational Mapping
\end{itemize}
\subsubsection{Abbreviations}
\begin{itemize}
    \item \textbf{$G_n$}: $n^{th}$ goal
    \item \textbf{$D_n$}: $n^{th}$ domain assumption
    \item \textbf{$R_n$}: $n^{th}$ functional requirement
    \item \textbf{$F_n$}: $n^{th}$ function
\end{itemize}
\subsection{Revision history}


\subsection{Reference Documents}
\begin{itemize}
    \item \href{https://beep.metid.polimi.it/documents/121843524/23d1869d-ab17-4e36-979e-f1ccbc59be24}{Specification Document: R\&DD Assignment AY 2020-2021}
\end{itemize}


\subsection{Document Structure}
This document is composed of six sections, each with the purpose described below: \\
\begin{itemize}
    \item \textbf{Introduction}: This section provides an introduction of the problem, the scope of the project with details regarding the goals, target users and phenomena.
    The goals of the project are formulated in accordance with the description of actions and actors in the Design Document.
    Within the project's scope, properties and duties of different users and user groups are described in Target Users section.
    Furthermore, under the scope of the project, the relevant phenomena of the project is presented through their relevance to the world and the machine.
    \item \textbf{Architectural Design}:
    \item \textbf{User Interface Design}:

    \item \textbf{Requirements Traceability}:
    \item \textbf{Implementation, Integration and Test Plan}:
    \item \textbf{Effort Spent}: This section features the effort table, in which all team members provide a rough estimation on the time spent on creation of the various sections of the document.
    \item \textbf{References}: This section features different reference materials referred inside this document.
\end{itemize}
